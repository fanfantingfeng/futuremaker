NumPy(*Numerical Python*) is an open source Python library that's widely used in science and engineering.
```python
import numpy as np
a = np.array([[1, 2, 3], [4, 5, 6]])
a.shape
```
## Why NumPy?
Python lists are excellent, general-purpose containers. They can contain elements of a variety of types, and they are quite fast when used to perform individual operations on a handful of elements.
>Depending on the characteristics of the data and the types of operations that need to be performed, other containers may be more appropriate; by exploiting these characteristics, we can improve speed, reduce memory consumption, and offer a high-level syntax for performing a variety of common processing tasks.
**Numpy shines when there are large quantities of "homogeneous" data to be processed on the CPU.**
## array
A structure for storing and retrieving(检索) data.
We often talk about an array as if it were a grid in space, with each cell storing one element of the data. For instance, if each element of the data were a number, we might visualize a **"one-dimensional"** array like a *list*;
A **two-dimensional** array would be like a *table*.
A **three-dimensional** array would be like *a set of tables*, perhaps stacked as though they were printed on separate pages. 
In NumPy, this idea is generalized to an arbitrary number of dimensions, and so the fundamental array class is called ==ndarray==: it represents an "N-dimensional array".

Most NumPy arrays have some restrictions:
- All elements of the array must be of the same type of data;
- Once created, the total size of the array can't change;
- The shape must be "rectangular(矩形)", not "jagged(参差不齐的)";
**When these conditions are met, NumPy exploits these characteristics to make the array faster, more memory efficient, and more convenient to use than less restrictie data structures.**
注: 以下使用"array"来指代 ndarray.
#### Array fundamentals
```python
a = np.array([1, 2, 3, 4, 5, 6])
a[0]  #1
a[0] = 10  #the array is mutable.
a[0]  #10

b = a[:3]  #切片可用于索引

```
在Python的列表中, slice indexing将复制列表元素到新的列表中.
在ndarray中, slicing an array只返回一个view(视图):
- an object that refers to the data in the original array.
- The original array can be mutated using the view.
```python
b = a[3:]
b[0] = 40
a[3] == 40  #true
```
[[Copies and views]]呈现了关于在NumPy array中的复制与视图的详细说明!

Two-and higher-dimensional arrays can be initialized from nested Python sequences:
```python
a = np.array([[1,2,3,4], [5,6,7,8], [9,10,11,12]])
```
A dimension of an array is sometimes referred to as an "axis".
This terminology may be useful to disambiguate between the dimensionality of an array and the dimensionality of the data represented by the array. For instance, the array ==a== could represent three points, each lying within a four-dimensional space, but ==a== has only two "axes".
Another difference between an array and a list of lists is that an element of the array can be accessed by specifying the index along each axis within a single set of square brackets, separated by commas.
For instance, the element ==8== is in row ==1== and column ==3==:
```python
a[1, 3]
```
>A better mental model is to think of the column index as coming last and the row index as second to last.
>This generalizes to arrays with any number of dimensions.

#### Array attributes
- ndarray.ndim: The number of dimensions of an array.
- ndarray.shape: The shape of an array is a tuple of non-negative integers.
- ndarray.size: The fixed, total number of elements in array.
- ndarray.dtype: The data type.
```python
a = np.arange(9).reshape(3,3)
a.ndim   #2
a.shape  #(3,3)
a.size   #9
import math
a.size == math.prod(a.shape)  #True
a.dtype  #dtype('int64')   int for integer, 64 for 64-bit
```
#### Create a basic array
创建元素全为0的array:
```python
np.zeros(2)
np.zeros((3, 4))
np.zeros((3, 4, 5))
```
创建元素全为1的array:
```python
np.ones(2)
np.ones((3, 4))
np.ones((3, 4, 5))
```
甚至创建全空的array, ==np.empty()== 创建元素初始值为随机(random)的array, 随机值依赖于存储器的状态(state of the memory).
使用 ==np.empty()== 而非==np.zeros()== 主要考虑速度因素:
```python
np.empty(2)  
```
使用连续元素创建array:
```python
np.arange(4)
np.arange(2, 9 ,2)
```
创建包含线性序列元素的array:
```python
np.linspace(0, 10, num=5)
```
创建array时指定 dtype:
```python
x = np.ones(2, dtype=np.int64)
```

#### Adding, removing, and sorting
通过==np.sort()==来简单排序array, 可指定axis, kind, order.
```python
arr = np.array([2, 1, 5, 3, 7, 4, 6, 8])
np.sort(arr)  #并不会改变arr原本的排序, 本质上是排序copy
```
==np.sort()==返回的是排序后的copy, 作为补充, 还有其他的排序方法可用:
- **argsort**: an indirect sort along a specified axis;
- **lexsort**: an indirect stable sort on multiple keys;
- **searchsorted**: find elements in a sorted array;
- **partition**: partial sort.
详细说明详见: [[sort]]

##### 合并array
```python
a = np.array([1, 2, 3, 4])
b = np.array([5, 6, 7, 8])
np.concatenate((a,b))  
#array([1, 2, 3, 4, 5, 6, 7, 8])

#对于二维以上数据的合并, 需要指定axis
x = np.array([[1, 2], [3, 4]])
y = np.array([[5, 6]])
np.concatenate((x, y), axis=0)
z = np.array([[5], [6]])
np.concatenate((x, z), axis=1)
```
如果需要从array中删除元素, 最简单的方式是通过indexing来筛选出需要的元素.

#### 关于shape和size
==ndarray.ndim== will tell you the number of axes, or dimensions, of the array.
==ndarray.size== will tell you the total number of elements of the array. The **product** of the elements of the array's shape.
==ndarray.shape== will display a tuple of integers that indicate the number of elements stored along each dimension of the array.
```python
arr = np.arange(9).reshape(3,3)
arr.ndim   #2
arr.size   #9
arr.shape  #(3,3)
```
==ndarray.reshape()== will give a new shape to an array without changing the data.
```python
a = np.arange(12).reshape(3, 4)
```
通过 np.reshape(), 可以指定额外的参数:
```python
np.reshape(np.arange(12), newshape=(3, 4), order="C")
```
==newshape==可以指定整数(默认为array长度)或者整数元组.
==order== means to read/write the elements using C-like or Fortran-like index order. A means to read/write the elements in Fortran-like index order if a is Fortran contiguous in memory, C-like order otherwise.





https://numpy.org/doc/stable/user/absolute_beginners.html